---
type: planning
doc_type: PRD
project: Dev_Project_Manager
status: Draft
priority: High
version: 1
related_project: "[[00_Project_Dashboard]]"
tags:
  - planning
  - prd
  - codex-context
created: 2026-01-23
updated: 2026-02-11T15:00
---

# PRD: 연구개발 프로젝트 관리 시스템

> [!abstract] Document Info
> - **Project:** [[00_Project_Dashboard]]
> - **Type:** `VIEW[{doc_type}]`
> - **Status:** `VIEW[{status}]`

## 1. 🎯 Overview (개요)

### 1.1 목표
기존 구글 시트 기반의 연구개발 진도 관리 시스템을 웹 애플리케이션으로 전환하여, **프로젝트 관리, 업무일지, 일정관리**를 통합 관리하고 **대시보드**를 통해 전체 현황을 한눈에 파악할 수 있도록 한다.

### 1.2 배경 및 문제점

**현재 관리 체계 (AS-IS):**
```
┌─────────────────────────────────────────────────────────────┐
│  엑셀 파일들 (분산 관리)                                      │
│  ├─ 연구소 개발제품 LIST (전체 진도 요약)                     │
│  ├─ 주요 개발진행 ITEM (개별 프로젝트 상세)                   │
│  └─ 개별 일정표 (프로젝트별 간트차트) ← 양식이 제각각          │
├─────────────────────────────────────────────────────────────┤
│  구글 시트 (웹용)                                            │
│  ├─ 프로젝트 관리                                            │
│  └─ 업무일지                                                 │
└─────────────────────────────────────────────────────────────┘
```

| 현재 문제점 | 개선 방향 |
|------------|----------|
| 전체진도관리(엑셀)와 업무일지(웹)가 별도 관리됨 | 데이터 연동으로 일원화 |
| 개별 일정표 양식이 프로젝트마다 다름 | 표준화된 간트차트 템플릿 |
| 계획 vs 실적 비교가 수동 관리 | 자동 계획/실적 비교 기능 |
| 투자비/원가 정보가 분산됨 | 프로젝트별 원가 정보 통합 |
| 권한 관리 어려움 | 5단계 권한 체계 (일반/팀장/관리자/경영진 + 시스템관리자) |
| 전체 현황 파악 어려움 | 대시보드 (단계별 현황 집계) |
| UI/UX 불편 | 직관적인 웹 인터페이스 |

### 1.3 타겟 유저
- **Primary:** 연구개발 담당자 (업무일지 작성, 개별 진도 관리)
- **Secondary:** 팀장 (팀원 업무 확인, 진도 모니터링, 주간 보고 등록)
- **Tertiary:** 관리자 (전체 프로젝트 관리, 주간 보고 수정)
- **Executive:** 경영진 (주요 프로젝트 현황 조회, 계획vs실적 비교, 검토/코멘트)
- **System:** 시스템 관리자 (사용자/권한/시스템 설정)

---

## 2. 👤 User Flow

### 2.1 일반 사용자 (연구개발 담당자)
```
로그인 → 대시보드 확인 → 담당 프로젝트 선택
  ├→ 업무일지 작성/수정/조회
  ├→ 개별 진도 업데이트 (진행사항, 이슈사항)
  └→ 개별 일정 관리
```

### 2.2 팀장
```
로그인 → 대시보드 확인 → 팀 프로젝트 현황 조회
  ├→ 팀원 업무일지 열람
  ├→ 전체 진도 관리 (단계 업데이트)
  ├→ 주간 보고 등록
  └→ 이슈사항 확인 및 조치
```

### 2.3 관리자
```
로그인 → 대시보드 확인 → 전체 프로젝트 현황 조회
  ├→ 프로젝트 생성/수정/삭제
  ├→ 주간 보고 문서 수정 (순서 변경, 내용 편집, 삭제)
  ├→ 경영진 보고 페이지 조회
  └→ 전체 진도 현황 모니터링
```

### 2.4 경영진
```
로그인 → 경영진 대시보드
  ├→ 주요 프로젝트 현황 조회 (즐겨찾기 기반)
  ├→ 계획 vs 실적 비교 조회 및 코멘트 작성
  └→ 주요 프로젝트 즐겨찾기 관리
```
※ 경영진은 프로젝트/업무일지 생성/수정 권한 없음 (조회 + 코멘트만)

### 2.5 시스템 관리자 (별도)
```
로그인 → 시스템 관리 대시보드
  ├→ 사용자 계정 관리 (생성/수정/삭제)
  ├→ 권한 설정
  ├→ 시스템 설정 (단계, 구분, 컬럼 등)
  └→ 구글 시트 연동 설정
```

---

## 2.4 프로젝트 라이프사이클

### 전체 흐름
```
┌─────────────┐    ┌─────────────┐    ┌─────────────────────────┐    ┌─────────────┐
│             │    │             │    │                         │    │             │
│  프로젝트   │───▶│   일정      │───▶│   프로젝트 관리        │───▶│  프로젝트   │
│    생성     │    │   등록      │    │   (업무일지 연동)       │    │    종료     │
│             │    │             │    │                         │    │             │
└─────────────┘    └─────────────┘    └─────────────────────────┘    └─────────────┘
      │                  │                       │                         │
      ▼                  ▼                       ▼                         ▼
  ┌────────┐        ┌────────┐            ┌──────────┐             ┌────────────┐
  │ 기본정보│        │세부추진│            │ 업무일지 │             │ 완료/보류  │
  │ 팀 구성 │        │ 항목   │            │   작성   │             │  상태변경  │
  │ 단계선택│        │ 계획   │            │ 단계진행 │             │ 결과기록   │
  └────────┘        │ 일정   │            │ 실적반영 │             └────────────┘
                    └────────┘            └──────────┘
```

### 라이프사이클 상세

| 단계 | 활동 | 담당자 | 주요 산출물 |
|------|------|--------|------------|
| **1. 프로젝트 생성** | 기본정보 입력, 팀 구성, 개발단계 선택 | 팀장/관리자 | 프로젝트 등록 |
| **2. 일정 등록** | 세부추진항목 등록, 계획 일정 설정 | 팀장 | 개별 일정표 |
| **3. 프로젝트 관리** | 업무일지 작성, 단계 진행, 실적 기록 | 팀원/팀장 | 업무일지, 진행현황 |
| **4. 프로젝트 종료** | 최종 단계 완료, 상태 변경 | 팀장/관리자 | 완료 프로젝트 |

### 프로젝트 상태 전환

```
                    ┌──────────────────────────────┐
                    │                              │
                    ▼                              │
┌────────┐     ┌────────┐     ┌────────┐     ┌────────┐
│  생성  │────▶│ 진행중 │────▶│ 완료   │     │  보류  │
│ (Draft)│     │(Active)│     │(Done)  │     │ (Hold) │
└────────┘     └────────┘     └────────┘     └────────┘
                    │              ▲              ▲
                    │              │              │
                    └──────────────┴──────────────┘
                           상태 변경 가능
```

**상태 정의:**
- **진행 (Active):** 현재 진행 중인 프로젝트 (기본 상태)
- **보류 (Hold):** 일시적으로 중단된 프로젝트
- **완료 (Done):** 모든 단계가 완료된 프로젝트

### 단계 진행 규칙

1. **단계 완료 처리:**
   - 팀장/관리자가 해당 단계를 "완료"로 표시
   - 완료 시 완료일자 자동 기록
   - 다음 단계로 현재단계 자동 변경

2. **단계 상태:**
   - 🔵 예정 (Planned): 아직 시작되지 않음
   - 🟡 진행중 (In Progress): 현재 작업 중
   - 🟢 완료 (Completed): 완료됨

3. **업무일지 ↔ 세부추진항목 연동:**
   ```
   업무일지 작성
        │
        ▼
   ┌────────────────────────────────────┐
   │ 프로젝트 + 단계 선택               │
   │ (업무일지에서 프로젝트/단계 지정)   │
   └────────────────────────────────────┘
        │
        ├──▶ 프로젝트 '업무진행사항'에 자동 반영
        │
        └──▶ 세부추진항목 '실적' 연동 (선택 시)
             └── 해당 항목의 실적 시작일/종료일 자동 업데이트
   ```

---

## 3. 📱 Functional Requirements (기능)

### 3.1 프로젝트 관리 (Priority: HIGH)

#### 3.1.1 프로젝트 목록 화면 ✅
- [x] **헤더 레이아웃:**
  - 📁 프로젝트 목록 타이틀
  - [📥 Excel] 다운로드 버튼 (추후 구현)
  - [+ 새 프로젝트] 버튼 (engineer, admin 권한)
- [x] **필터 영역:**
  - 상태 필터 (전체/진행중/보류/완료)
  - 소속 필터 (전체/전장/유압/기타)
  - 단계 필터 (14개 단계)
  - [⭐ 즐겨찾기] 버튼 (추후 구현)
  - 🔍 검색창 (고객사, ITEM 검색)
- [x] **테이블:**
  - 컬럼: ID, 상태, 고객사, ITEM, 소속, 팀장, 현재단계, 대일정, 관리
  - 상태 배지 색상 (🟢완료, 🟡진행중, 🔴보류)
  - 페이지네이션 (< 1 2 3 ... > 총 N건)
  - 관리 컬럼: 상세 → (상세 페이지에서 수정/삭제)
  - ⚠️ 수정/삭제 버튼은 목록에서 제외 (상세 페이지에서만 가능)
- [x] **접근 권한:**
  - 조회: 모든 로그인 사용자
  - 생성/수정: engineer, admin

#### 3.1.2 프로젝트 상세 화면 ✅
- [x] **헤더:**
  - ← 목록으로 버튼
  - 📁 프로젝트 상세 타이틀
  - [⭐ 즐겨찾기] 버튼 (추후 구현)
  - [수정] 버튼 (engineer, admin 권한)
  - [삭제] 버튼 (admin 권한, 확인 다이얼로그)
- [x] **기본 정보 카드:**
  - 대표 이미지 (미등록 시 플레이스홀더)
  - 프로젝트 ID, 고객사, ITEM, PART NO
  - 모델, 소속, 구분
  - 팀장, 팀원
  - 대일정 (시작일 ~ 종료일)
  - 비고, 업무진행사항, 이슈사항
- [x] **상태 관리:**
  - 상태 드롭다운 (진행중/보류/완료)
  - 상태 변경 시 이력 자동 기록
- [x] **단계 진행 표시:** ✅
  - 선택된 단계 목록 표시 (가로 프로그레스 바)
  - 현재 단계 강조 (🟡 진행중)
  - 단계별 상태 (⚪예정/🟡진행중/🟢완료)
- [x] **단계 클릭 완료 처리:** ✅
  - 현재 단계 클릭 → 완료 처리 후 다음 단계로 이동
  - 미래 단계 클릭 → 중간 단계 모두 완료 처리 후 해당 단계로 이동
  - 권한: engineer, admin
- [x] **단계 되돌리기:** ✅ (2026-02-06)
  - 완료된 단계 클릭 → 확인 팝업 → 해당 단계로 되돌아가기
  - 되돌아간 이후 단계는 다시 ⚪예정 상태로 표시
  - 이력은 업무일지에서 확인 가능
- [x] **단계 관리 팝업:** ✅
  - 단계 관리 버튼 클릭 시 팝업 열기
  - 현재 단계 목록 표시 (🟢완료/🟡진행중/⚪예정)
  - 단계 추가: 14개 전체 단계 중 선택 가능
  - 단계 삭제: ⚪예정 상태인 단계만 삭제 가능
  - 🟢완료, 🟡진행중 단계는 삭제 불가
  - 권한: engineer, admin
- [x] **업무진행사항 탭:** ✅ (2026-02-06 개선)
  - [x] 날짜 필터 (기본 1주일, 달력 UI)
  - [x] 업무일지 카드 목록 (계획:내용 4:6 비율)
  - [x] 이슈 해결 처리 ("✅ 처리완료" 링크)
  - [x] 미해결 이슈사항 섹션 (경고 스타일)
  - [x] **세부추진항목 표시:** ✅ (2026-02-06)
    - [x] 업무일지 카드에 연결된 세부추진항목 배지 표시
    - [x] 이슈사항에 단계 + 세부추진항목 배지 표시
- [x] **일정 탭:** ✅ (2026-02-06)
  - [x] 테이블 뷰 (단계, 항목명, 계획, 실적, 구분, 상태, 관리)
  - [x] 간트차트 뷰 (일/주/월 토글, 상태별 색상)
  - [x] 세부추진항목 등록/수정 모달
- [ ] **추가 탭 (추후 구현):**
  - 💰 원가 탭: 투자비/원가 정보
  - 📎 첨부파일 탭: 파일 목록 및 업로드
- [x] **접근 권한:**
  - 조회: 모든 로그인 사용자
  - 수정: engineer, admin
  - 삭제: admin

#### 3.1.3 프로젝트 생성/수정 화면 ✅
- [x] **필수 입력 항목:**
  - 고객사 *
  - ITEM *
  - 팀장 * (1명, 담당자 목록에서 선택)
  - 대일정 * (시작일 ~ 종료일, 달력 선택)
  - 현재 단계 * (선택한 단계 중 현재 진행 단계)
- [x] **선택 입력 항목:**
  - PART NO
  - 소속 (전장/유압/기타)
  - 구분 (농기/중공업/해외/기타 - 주간보고 그룹핑 용도)
  - 모델
  - 팀원 (여러 명, 담당자 목록에서 다중 선택, admin/engineer만)
  - 비고
- [x] **프로젝트별 단계 설정 (팀장이 선택):** ✅
  - 가능한 단계 (14개): `검토 | 설계 | 개발 | PROTO | 신뢰성 | P1 | P2 | 승인 | 양산이관 | 초도양산 | 품질관리 | 원가절감 | 품질개선 | 설계변경`
  - **체크박스로 해당 프로젝트에 필요한 단계만 선택**
  - 선택된 단계만 진행 현황에 표시
  - 단계별 진행상황 색상 표시 (진행중: 노랑, 완료: 초록)
- [x] **프로젝트 팀 구성:** ✅
  - 팀장 (1명): 프로젝트 총괄 담당자 - 단계 설정 권한
  - 팀원 (여러 명): 프로젝트 참여 인원
  - 팀장/팀원 선택 UI (담당자 목록에서 드롭다운/태그 선택)
  - **⚠️ sysadmin은 팀장/팀원 불가** (시스템 관리 역할에 집중)
- [ ] 전체 진도 관리 (선택된 단계별 진행률)
- [ ] **프로젝트 상태 관리:**
  - 상태 종류: 진행 (Active) / 보류 (Hold) / 완료 (Done)
  - 상태 변경 권한: 팀장, 관리자
  - 상태 변경 시 변경 이력 자동 기록
  - 완료 상태 변경 조건: 모든 선택 단계가 완료되어야 함
- [ ] **단계 진행 관리:**
  - 현재 단계 표시 (현재 진행 중인 단계)
  - 단계별 완료 처리 (팀장/관리자)
  - 단계 완료 시: 완료일자 자동 기록, 다음 단계로 자동 이동
  - 단계 상태: 🔵 예정 → 🟡 진행중 → 🟢 완료
  - **프로젝트 진행 중 단계 변경:**
    - 단계 추가: 언제든 새로운 단계 추가 가능 (팀장/관리자)
    - 단계 삭제: 🔵 예정, 🟡 진행중 상태인 단계만 삭제 가능
    - 🟢 완료된 단계는 삭제 불가 (이력 보존)
    - 단계 변경 시 변경 이력 자동 기록
- [ ] **투자비/원가 정보 관리 (선택):**
  - 예상 판매가
  - 예상 자재비
  - 자재비율 (자동 계산)
  - 예상 투자실비
  - 예상 물량 (년)
- [ ] **대표 이미지 (제품 사진/모델링):**
  - 프로젝트별 대표 이미지 1장 등록
  - 지원 형식: JPG, PNG, GIF (최대 5MB)
  - 표시 위치: 프로젝트 목록 (썸네일), 프로젝트 상세 (큰 이미지)
  - 이미지 미등록 시 기본 플레이스홀더 표시
  - 저장소: Google Drive 연동

### 3.2 업무일지 관리 (Priority: HIGH)
- [x] 업무일지 CRUD ✅
- [x] 필수 입력 항목: ✅
  - 날짜 (date picker - 달력 UI) ✅
  - **담당자: 로그인 사용자 자동 입력 (수정 불가)**
  - 프로젝트 연결 (**⚠️ 본인 소속 프로젝트만 표시** - 팀장 또는 팀원으로 등록된 프로젝트)
  - 단계 연결
  - 업무 내용 (업무 진행사항)
  - 계획
- [x] **참여자 선택:** ✅
  - 담당자 외 함께 작업한 팀원 선택 가능
  - 선택 대상: 해당 프로젝트의 팀장/팀원
  - 다중 선택 가능 (태그 형식)
  - participants 필드에 저장 (쉼표 구분)
- [x] **이슈사항 입력:** ✅ (2026-02-05)
  - issue 필드 (텍스트 입력)
  - issueStatus (open/resolved)
  - 수정 시 "해결됨" 체크박스
  - 프로젝트 issues 필드에 자동 반영
- [x] **단계 권한 분리:** ✅ (2026-02-05)
  - 팀장: 단계 드롭다운 활성화, 변경 시 프로젝트 currentStage 자동 반영
  - 팀원: 단계 드롭다운 비활성화 (currentStage 읽기 전용)
  - 단계 변경 시 확인 팝업 표시
- [x] **프로젝트 자동 연동:** ✅
  - 업무일지 작성 시 → 프로젝트 '업무진행사항'에 자동 반영
  - 업무일지 이슈사항 → 프로젝트 'issues'에 자동 반영
  - 팀장 단계 변경 → 프로젝트 'currentStage' 자동 반영
  - ☑️ 자동 반영 체크박스 UI 표시
- [x] **검색 및 열람:** ✅
  - 검색 및 필터링 (날짜, 프로젝트, 작성자)
  - **모든 직원이 전체 업무일지 검색/열람 가능**
  - 수정/삭제는 본인 작성 건만 가능
- [x] **업무일지 작성 화면 (Roadmap 2.12):** ✅
  - 전체 페이지 형식 (/worklogs/new, /worklogs/[id]/edit)
  - Header + Sidebar 레이아웃
  - [ ] 첨부파일은 Phase 3에서 구현

### 3.3 일정 관리 (Priority: HIGH)
- [ ] **전체 일정 (대일정):**
  - 프로젝트 시작일 ~ 종료일
  - 전체 프로젝트 간트 차트
- [x] **개별 일정표 (세부추진항목):** ✅ (2026-02-06)
  - [x] 프로젝트별 세부 작업 항목 CRUD ✅
  - [x] **세부추진항목 등록 화면:** ✅
    - [x] 항목명 * ✅
    - [x] 계획 시작일 / 종료일 * ✅
    - [x] 업무 구분: 주관 / 협조 * ✅
    - [x] 관련 부문 (영업/생산/구매/품질/설계) ✅
    - [x] 비고 ✅
  - [x] **실적 입력 방식 (둘 다 지원):** ✅
    - [x] 직접 수동 입력: 실적 시작일 / 종료일 ✅
    - [x] 업무일지 연동: 업무일지 작성 시 자동 반영 ✅ (2026-02-06)
  - [x] **상태 자동 계산 (일정표 갱신 시):** ✅ (2026-02-06)
    - [x] 예정: 계획 시작일 > 오늘 AND 실적 시작일 없음 ✅
    - [x] 진행중: 실적 시작일 있음 AND 실적 종료일 없음 ✅
    - [x] 완료: 실적 종료일 있음 ✅
    - [x] 지연: 계획 시작일 ≤ 오늘 AND 실적 시작일 없음 ✅
  - [x] **일정표 갱신 버튼:** ✅ (2026-02-06)
    - [x] Google Sheets에서 최신 데이터 로드 ✅
    - [x] 오늘 날짜 기준 상태 재계산 ✅
  - [x] **완료 버튼 (관리 컬럼):** ✅ (2026-02-06)
    - [x] 표시 조건: 상태가 "진행중"일 때만 ✅
    - [x] 클릭 시: 실적 종료일 = 오늘 날짜로 설정 → 상태 "완료"로 변경 ✅
  - [x] 계획 vs 실적 비교 시각화 (색상 구분) ✅
    - 파란색: 계획
    - 초록색: 완료
    - 주황색: 진행중
    - 회색: 예정
    - 빨간색: 지연
- [ ] 마일스톤 설정 (주요 일정 표시)
- [ ] 일정 변경 이력 관리
- [x] **간트차트 드릴다운 (기간별 진행현황 조회):** ✅ (2026-02-09)
  - 전체 간트차트에서 프로젝트 클릭 시 팝업 표시
  - 팝업 내용:
    - 프로젝트 기본 정보 (고객사/ITEM, 상태, 진행률)
    - **년/월 선택 드롭다운** (조회 기간 변경 가능)
    - 해당 기간 주간 보고 목록 (주차, 주요 추진 실적 및 계획)
    - 해당 기간 단계 변경 이력 (changedBy 표시)
    - 세부추진항목 진행 현황 (해당 월 기간과 겹치는 항목)
  - [프로젝트 상세 보기] 버튼 → 프로젝트 상세 페이지 이동
  - 권한: 모든 사용자 조회 가능

### 3.4 대시보드 (Priority: HIGH)
- [x] **전체 진도 현황 요약:** ✅
  - [x] 단계별 프로젝트 수 집계 (검토: 23, 설계: 12, 개발: 4, ...) ✅
  - [ ] 소속별 프로젝트 수 (전장: 52, 유압: 36, 전산: 6)
  - [x] 진행/보류 현황 ✅
- [ ] 프로젝트별 진행률 표시
- [ ] 전체 일정 간트 차트
- [x] **즐겨찾기 프로젝트 (Priority: HIGH):** ✅ (2026-02-06)
  - [x] 사용자별 즐겨찾기 프로젝트 등록/해제 ✅
  - [x] 대시보드에서 즐겨찾기 프로젝트만 필터링 보기 ✅
  - [x] 프로젝트 목록/상세에서 ⭐ 버튼으로 토글 ✅
  - 팀장/관리자: 중요 프로젝트만 모아서 모니터링
  - [x] 즐겨찾기 필터 시 업무일지/이슈 연동 ✅
- [x] 최근 업무일지 목록 ✅
- [x] 이슈사항 현황 (미해결 건수) ✅
- [ ] **주요 개발 진행 ITEM 뷰:**
  - 핵심 프로젝트만 필터링하여 상세 현황 표시
  - 투자비/원가 정보 포함
- [x] **경영진 대시보드 (Executive Dashboard):** ✅ (2026-02-11)
  - **설계 원칙:**
    - 즐겨찾기한 주요 프로젝트만 표시 (전체 30개+ 중 핵심만)
    - 한 페이지에 스크롤 없이 핵심 정보 요약
    - 계획 vs 실적 비교가 핵심 뷰
  - [x] **경영진 메인 대시보드:** ✅
    - 즐겨찾기 프로젝트 현황 카드 (최대 6~8개)
    - 프로젝트별: 고객사/ITEM, 현재단계, 진행률, 계획대비 상태
    - 전체 요약: 정상/지연/완료 프로젝트 수
    - 금주 주간 보고 요약
    - 프로젝트 카드 클릭 → 상세 팝업 표시
  - [x] **프로젝트 상세 팝업 (경영진용):** ✅
    - 기본 정보: 현재단계, 진행률, 상태, 대일정, 팀장
    - 단계별 진행 시각화 (완료/진행중/예정)
    - 탭 구조: 주간보고/단계변경이력/세부추진항목 (년/월 필터)
    - 이슈사항 목록
    - 경영진 코멘트 리스트 + 팀장 답변 (스레드 형식)
    - 코멘트 작성 기능
  - [x] **계획 vs 실적 비교 페이지:** ✅
    - 즐겨찾기 프로젝트의 월별 계획/실적 비교 테이블
    - 일정 지연 프로젝트 하이라이트 (🟡 표시)
    - 프로젝트 상태 표시 (🟢정상/🟡지연/✅완료)
  - [x] **팀장 코멘트 확인/답변:** ✅
    - 프로젝트 상세 페이지에 경영진코멘트 탭 추가
    - 팀장이 답변 작성 가능
  - **접근 권한:** 경영진, 관리자

### 3.5 권한 관리 (Priority: HIGH)
- [x] **자체 로그인 시스템 (ID/Password):** ✅
  - 서버는 Google Service Account로 구글 시트에 상시 연결
  - 사용자는 별도 계정(ID/Password)으로 로그인
  - 담당자 시트의 정보를 기반으로 인증
- [x] 로그인/로그아웃 ✅
- [x] 5단계 권한 체계 (user → engineer → admin → executive + sysadmin): ✅

  **업무 권한:**
  | 권한 | 프로젝트 관리 | 업무일지 작성 | 업무일지 열람 | 주간보고 등록 | 주간보고 수정 |
  |------|--------------|--------------|--------------|--------------|--------------|
  | user (일반) | 조회만 | X | X | X | X |
  | engineer (개발팀) | O | O | O | O | X |
  | admin (관리자) | O | O | O | O | O |
  | executive (경영진) | 조회만 | X | O | X | X |
  | sysadmin (시스템) | - | - | - | - | - |

  **권한별 설명:**
  - **user**: 타팀 직원 - 프로젝트 현황만 조회 가능, 업무일지 접근 불가
  - **engineer**: 개발팀 직원 - 프로젝트/업무일지 전체 권한, 주간보고 등록만
  - **admin**: 관리자 - engineer 권한 + 주간보고 수정 권한
  - **executive**: 경영진 - 조회 전용 + 코멘트 작성
  - **sysadmin**: 시스템 관리자 - 사용자/시스템 관리 전용

  **경영진 특별 권한:**
  - 프로젝트/업무일지 생성/수정 권한 없음 (조회 전용)
  - 경영진 메인 대시보드에서 프로젝트별 코멘트 작성 가능
  - 계획 vs 실적 비교 페이지에서 코멘트 작성 가능
  - 주요 프로젝트 즐겨찾기

  **시스템 관리자 (별도):**
  | 권한 | 사용자 관리 | 권한 설정 | 시스템 설정 | 구글시트 연동 |
  |------|------------|----------|------------|--------------|
  | sysadmin | O | O | O | O |

  > **Note:** 업무일지 수정/삭제는 본인 작성 건만 가능
- [ ] 특정 프로젝트 접근 제한 (선택)
- [x] **경영진 코멘트 기능:** ✅ (2026-02-11)
  - [x] Comments API (/api/comments) - GET/POST/DELETE ✅
  - [x] 경영진 메인 대시보드: 프로젝트 상세 모달에서 코멘트 작성/조회 ✅
  - [x] 계획 vs 실적 비교: 프로젝트별 상태 표시 ✅
  - [x] 프로젝트 상세 페이지: 팀장 코멘트 확인/답변 탭 ✅
  - [ ] 코멘트 알림: 해당 팀장에게 알림 발송 (Phase 3.4)

### 3.6 구글 시트 연동 (Priority: HIGH)
- [ ] 기존 구글 시트 데이터 읽기
- [ ] 웹에서 수정 시 구글 시트 동기화
- [ ] 연동 상태 표시

### 3.7 파일 첨부 (Priority: MEDIUM)
- [ ] 프로젝트별 파일 첨부 (도면, 사양서, 이미지 등)
- [ ] 업무일지에 파일 첨부
- [ ] 파일 미리보기 (이미지, PDF)
- [ ] 파일 다운로드
- [ ] 파일 저장소: Google Drive 연동

### 3.8 알림 기능 (Priority: MEDIUM)
- [ ] 이메일 알림 발송 (Gmail API)
- [ ] 알림 트리거:
  - 마감일 임박 (D-7, D-3, D-1)
  - 프로젝트 단계 변경 시
  - 이슈사항 등록 시 (팀장에게 알림)
  - 업무일지 멘션 시 (선택)
- [ ] 알림 설정 (사용자별 On/Off)

### 3.9 고급 검색 (Priority: MEDIUM)
- [ ] 복합 조건 검색:
  - 날짜 범위
  - 프로젝트 + 단계 + 담당자 조합
  - 고객사, 소속 필터
  - 진행여부 (진행/보류)
- [ ] 키워드 검색 (업무진행사항, 이슈사항 내용)
- [ ] 검색 결과 정렬 (날짜, 프로젝트명, 단계 등)
- [ ] 검색 조건 저장 (즐겨찾기)

### 3.10 사용자 관리 (Priority: HIGH)
- [x] **사용자 CRUD (관리자 전용):** ✅
  - 사용자 생성 (이름, ID, 비밀번호, 이메일, 권한, 소속)
  - 사용자 목록 조회 (검색, 필터링)
  - 사용자 정보 수정
  - 사용자 삭제 (비활성화)
- [x] **사용자 계정 관리:** ✅ (부분)
  - 초기 비밀번호 설정 ✅
  - 비밀번호 변경 (본인) - TODO
  - 비밀번호 초기화 (관리자) - TODO
- [x] **권한 할당:** ✅
  - 관리자/팀장/일반 권한 부여
  - 소속 부서 지정
- [x] 담당자 시트와 동기화 (양방향) ✅

### 3.11 시스템 설정 (Priority: MEDIUM)
- [ ] **화면 설정 (관리자 전용):**
  - 프로젝트 목록 표시 컬럼 선택/순서 변경
  - 기본 컬럼: 즐겨찾기, 고객사, ITEM, 소속, 팀장, 현재단계, 대일정
  - 추가 컬럼: PART NO, 팀원, 모델, 진행상태, 최종수정일
  - 설정 저장 시 모든 사용자에게 적용
- [ ] **개발 단계 관리:**
  - 기본 14개 단계 활성화/비활성화
  - 커스텀 단계 추가 가능
  - 단계 순서 변경
- [ ] **시스템 옵션:**
  - 기본 페이지당 항목 수 설정 (10/20/50/100)
  - 날짜 표시 형식 (YYYY-MM-DD / YY.MM.DD)
  - 소속 옵션 관리 (전장/유압/기타 + 추가)
- [ ] **데이터 관리:**
  - 구글 시트 연동 상태 확인
  - 수동 동기화 실행
  - 백업 다운로드 (CSV/Excel)

### 3.12 엑셀 다운로드 (Priority: MEDIUM)
- [ ] **프로젝트 목록 다운로드:**
  - 현재 필터 조건 적용된 목록 다운로드
  - 다운로드 컬럼: 고객사, ITEM, PART NO, 소속, 팀장, 팀원, 현재단계, 대일정, 상태
  - 파일 형식: .xlsx (Excel)
  - 파일명: `프로젝트목록_YYYYMMDD.xlsx`
- [ ] **업무일지 목록 다운로드:**
  - 현재 필터 조건 적용된 목록 다운로드
  - 다운로드 컬럼: 날짜, ITEM, 고객사, 단계, 담당자, 계획, 업무내용
  - 파일 형식: .xlsx (Excel)
  - 파일명: `업무일지_YYYYMMDD.xlsx`
- [ ] **일정 데이터 다운로드 (간트차트):**
  - 전체 간트차트: 모든 프로젝트 대일정
  - 개별 일정표: 선택한 프로젝트의 세부추진항목
  - 다운로드 컬럼: 프로젝트명, 항목명, 계획시작일, 계획종료일, 실적시작일, 실적종료일, 상태
  - 파일 형식: .xlsx (Excel)
  - 파일명: `일정표_YYYYMMDD.xlsx` 또는 `일정표_프로젝트명_YYYYMMDD.xlsx`
- [ ] **공통 기능:**
  - 다운로드 버튼 위치: 각 목록 페이지 상단
  - 권한: 모든 사용자 다운로드 가능

### 3.13 주간 보고서 (Priority: HIGH) ✅ 부분 완료 (2026-02-09)
- [x] **주간 보고 등록:** ✅
  - 팀장이 자기 담당 프로젝트의 주간 보고 작성
  - 입력 항목:
    - 주차 선택 (예: 2025년 7월 5주차, 자동 계산)
    - 구분 (농기/중공업/해외/기타 등 - 관리자 설정 가능)
    - 고객사 (프로젝트에서 선택 또는 직접 입력)
    - 개발 ITEM (프로젝트에서 선택 또는 직접 입력)
    - 주요 추진 실적 및 계획 (텍스트, 여러 줄)
  - **연계 드롭다운 (Cascading Dropdown):**
    - 구분 선택 → 해당 구분의 고객사만 드롭다운에 표시
    - 고객사 선택 → 해당 고객사의 ITEM만 드롭다운에 표시
    - 예: 농기 선택 → LS엠트론 선택 → 스트로크 실린더, 기타 ITEM 등 표시
  - **업무일지 기반 초안 자동 생성:**
    - 해당 주차에 작성된 업무일지 내용을 자동으로 불러오기
    - 팀장이 편집/보완하여 최종 작성
  - **AI 정리 기능 (선택):**
    - 불러온 업무일지 내용을 AI가 자동 요약/정리
    - Google Gemini API 활용
    - 체크박스로 On/Off 선택
    - AI 프롬프트 양���은 별도 정의 (TODO)
  - **한 번에 하나의 항목씩 저장** (��러 항목 등록 시 반복 등록)
- [x] **주간 보고 집계 화면:** ✅
  - 주차별로 전체 팀장들의 보고 내용 통합 표시
  - 구분별 그룹핑 (농기 → 중공업 → 해외 → 기타)
  - 주차 선택 필터 (이�� 주차 보기 가능)
  - 공지사항/요청사항 섹션 (별도 입력)
  - **전체 주간보고 AI 요약:**
    - 집계 화면 하단에 전체 보고 내용 요약 섹션 표시
    - AI 요약 체크박스: 체크 시 Google Gemini API로 자동 요약
    - 미체크 시 관리자가 직접 입력
    - 요약 내용 수정 가능
- [x] **관리자 편집 기능 (집계 화면):**
  - **항목 순서 변경:** 드래그 또는 ↑↓ 버튼으로 위치 이동 (주요 아이템 상위 배치)
  - **내용 수정:** 주요 추진 실적 및 계획 내용 직접 편집
  - **항목 삭제:** 경영진 보고에 불필요한 항목 삭제
  - 수정/삭제 시 확인 다이얼로그 표시
- [ ] **주간 보고 다운로드:**
  - **엑셀 다운로드:** 이미지와 동일한 형식의 엑셀 파일 출력
    - 파일명: `주간업무보고_YYYY년MM월W주차.xlsx`
  - **PDF 다운로드:** 보고서 형태의 PDF 파일 출력
    - 파일명: `주간업무보고_YYYY년MM월W주차.pdf`
  - **다운로드 시 관리 컬럼 제외** (No, 구분, 고객사/ITEM, 내용만 포함)
- [ ] **권한:**
  - 등록: 팀장, 관리자
  - 수정/삭제/순서변경: 관리자 (집계 화면에서)
  - 조회: 모든 사용자
- [ ] **구분 관리 (관리자 설정):**
  - 기본값: 농기, 중공업, 해외, 기타
  - 구분 추가/수정/삭제/순서 변경 가능

---

## 4. 🗄️ Data Structure (데이터 구조)

> **📌 상세 데이터베이스 구조는 아래 문서를 참조하세요:**
> → [Database_ERD.md](../02-technical/Database_ERD.md) (13개 시트 상세 정의)
>
> *아래 내용은 초기 설계 참고용으로 보존됩니다.*

---

### 4.0 구글 시트 정보
- **Spreadsheet ID:** `1koJEgn6xwPNTFsuJdoo5gPGmKBdWZs08lJNQHYvLtJI`
- **시트 구성:**
  | 시트명 | gid | 용도 |
  |--------|-----|------|
  | 프로젝트 | 1851635214 | 프로젝트 목록 및 진도 관리 |
  | 업무일지 | 0 | 일일 업무 기록 |
  | 담당자 | 483730243 | 사용자 정보 |
  | 프로젝트 이력관리 | 651074413 | 변경 이력 |
  | 항목정보 | (확인필요) | 코드/마스터 데이터 |

### 4.1 Project (프로젝트 시트)
```typescript
{
  rowIndex: number           // A: 행 번호
  status: string             // B: 진행여부 (보류/진행)
  customer: string           // C: 고객사
  division: string           // D: 소속 (전장/유압/기타)
  category: string           // D2: 구분 (농기/중공업/해외/기타) - 주간보고 그룹핑
  model: string              // E: 모델
  item: string               // F: ITEM
  partNo: string             // G: PART NO
  teamLeader: string         // H: 팀장 (프로젝트 총괄 담당자, 1명)
  teamMembers: string[]      // I: 팀원 (프로젝트 참여 인원, 여러 명)
  currentStage: string       // J: 현재단계
  progress: string           // K: 업무진행사항
  issues: string             // L: 이슈사항
  note: string               // M: 비고
  additionalPlan: string     // N: 업무추가 일정계획
  stages: string             // O: 개발업무단계 (선택된 단계 목록)
  schedule: string           // P: 대일정 (YYYY-MM-DD ~ YYYY-MM-DD)
  price: number              // Q: 판매가
  materialCost: number       // R: 재료비
  materialRatio: number      // S: 재료비율
  updatedAt: string          // T: 수정일시
}
```

### 4.2 WorkLog (업무일지 시트)
```typescript
{
  date: string               // A: 날짜 (YYYY-MM-DD)
  item: string               // B: ITEM
  partNo: string             // C: PART NO
  customer: string           // D: 고객사
  stage: string              // E: 단계
  assignee: string           // F: 담당자
  plan: string               // G: 계획
  content: string            // H: 상세 내용
}
```

### 4.3 User (담당자 시트)
```typescript
{
  id: string                 // 사용자 ID (로그인 ID)
  password: string           // 비밀번호 (해시 저장)
  name: string               // 이름
  email: string              // 이메일
  role: 'sysadmin' | 'executive' | 'admin' | 'manager' | 'user'
  // 권한: 시스템관리자 / 경영진 / 관리자 / 팀장 / 일반
  division: string           // 소속 (전장/유압/기타)
  isActive: boolean          // 활성화 여부
  createdAt: string          // 생성일시
  updatedAt: string          // 수정일시
}
```

### 4.4 ProjectHistory (프로젝트 이력관리 시트)
```typescript
{
  projectId: string
  changedField: string
  oldValue: string
  newValue: string
  changedBy: string
  changedAt: string
}
```

### 4.5 Attachment (첨부파일)
```typescript
{
  id: string
  targetType: 'project' | 'worklog'  // 연결 대상
  targetId: string                    // 프로젝트 또는 업무일지 ID
  fileName: string
  fileType: string                    // MIME type
  fileSize: number
  fileUrl: string                     // Google Drive URL 또는 스토리지 경로
  uploadedBy: string
  uploadedAt: string
}
```

### 4.6 ProjectSchedule (개별 일정표 - 세부추진항목)
```typescript
{
  id: string
  projectId: string                   // 연결된 프로젝트
  taskName: string                    // 세부추진항목명
  category: string                    // 관련부문 (영업/생산/구매/품질/설계)
  responsibility: 'lead' | 'support'  // 주관/협조
  plannedStart: string                // 계획 시작일
  plannedEnd: string                  // 계획 종료일
  actualStart: string | null          // 실적 시작일
  actualEnd: string | null            // 실적 종료일
  status: 'planned' | 'in_progress' | 'completed' | 'delayed'
  note: string                        // 비고
  order: number                       // 표시 순서
}
```

### 4.7 ProjectCost (투자비/원가 정보)
```typescript
{
  projectId: string
  expectedPrice: number               // 예상 판매가
  expectedMaterialCost: number        // 예상 자재비
  materialRatio: number               // 자재비율 (%)
  expectedInvestment: number          // 예상 투자실비
  expectedQuantity: number            // 예상 물량 (년)
  currency: string                    // 통화 (KRW, USD)
  updatedAt: string
}
```

### 4.8 Favorite (즐겨찾기)
```typescript
{
  id: string
  userId: string                      // 사용자 ID
  projectId: string                   // 즐겨찾기한 프로젝트 ID
  createdAt: string                   // 등록일시
}
```

### 4.9 WeeklyReport (주간 보고)
```typescript
{
  id: string
  year: number                        // 연도 (2025)
  month: number                       // 월 (7)
  week: number                        // 주차 (5)
  weekStart: string                   // 주차 시작일 (2025-07-28)
  weekEnd: string                     // 주차 종료일 (2025-08-01)
  category: string                    // 구분 (농기/중공업/해외/기타)
  customer: string                    // 고객사
  item: string                        // 개발 ITEM
  content: string                     // 주요 추진 실적 및 계획 (여러 줄)
  projectId: string | null            // 연결된 프로젝트 ID (선택)
  order: number                       // 표시 순서
  createdBy: string                   // 작성자 (팀장)
  createdAt: string                   // 작성일시
  updatedAt: string                   // 수정일시
}
```

### 4.10 WeeklyReportNotice (주간 보고 공지사항)
```typescript
{
  id: string
  year: number
  month: number
  week: number
  content: string                     // 공지사항/요청사항 내용
  createdBy: string
  createdAt: string
}
```

### 4.11 ReportCategory (주간 보고 구분 - 마스터)
```typescript
{
  id: string
  name: string                        // 구분명 (농기, 중공업, 해외, 기타)
  order: number                       // 표시 순서
  isActive: boolean                   // 활성화 여부
}
```

---

## 5. 🛠️ Tech Stack (기술 스택)

| 영역 | 기술 | 비고 |
|-----|------|-----|
| Framework | **Next.js 14+ (App Router)** | React 기반, SSR/SSG 지원 |
| Language | TypeScript | 타입 안전성 |
| UI Library | Ant Design 또는 shadcn/ui | 대시보드/테이블 친화적 |
| 간트 차트 | dhtmlx-gantt 또는 frappe-gantt | 계획/실적 비교 지원 |
| Database | **구글 시트 (Google Sheets API)** | 기존 데이터 활용, 원본 역할 |
| Auth | **자체 로그인 (Credentials)** | 담당자 시트 기반 인증 |
| Google 연동 | **Service Account** | 서버에서 상시 연결 |
| 이메일 | Nodemailer + Gmail API | 알림 발송 |
| 배포 | **회사 내부 서버 (On-premise)** | Docker 컨테이너 권장 |

### 5.1 시스템 구성도
```
┌─────────────────────────────────────────────────────────────┐
│                    사용자 (5~20명)                           │
│                    반응형 웹 브라우저                         │
│                    (ID/Password 로그인)                      │
��─────────────────────┬───────────────────────────────────────┘
                      │
┌─────────────────────▼───────────────────────────────────────┐
│                 Next.js Application                         │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │
│  │   Pages     │  │  API Routes │  │  Auth       │         │
│  │  (React)    │  │  (Backend)  │  │(Credentials)│         │
│  └─────────────┘  └─────────────┘  └─────────────┘         │
└─────────────────────┬───────────────────────────────────────┘
                      │ Service Account (상시 연결)
┌─────────────────────▼───────────────────────────────────────┐
│                 Google Cloud Platform                       │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │
│  │Google Sheets│  │Google Drive │  │  Gmail API  │         │
│  │  (Database) │  │   (Files)   │  │  (알림)     │         │
│  └─────────────┘  └─────────────┘  └─────────────┘         │
└─────────────────────────────────────────────────────────────┘
```

---

## 6. 📋 개발 우선순위 (Phase)

### Phase 1: MVP (핵심 기능) ✅ 완료
1. ✅ 자체 ��그인 시스템 (ID/Password) + 권한 관리
2. ✅ **사용자 관리 CRUD (관리자 전용)**
3. ✅ Google Service Account 연동 (서버 상시 연결)
4. ✅ 프로젝트 CRUD (팀장 1명 + 팀원 여러 명 구조)
   - ⚠️ sysadmin은 팀장/팀원 불가 (비즈니스 규칙 추가)
5. ✅ 업무일지 CRUD (담당자 자동입력 + 전체 열람 가능)
6. ✅ 구글 시트 양방향 동기화
7. ✅ **권한별 UI 접근 제어** (user/engineer/admin/executive/sysadmin)

### Phase 2: 대시보드 & 일정 ✅ 완료
1. ✅ **레이아웃 구현 (Header + Sidebar)**
2. ✅ **대시보드 메인 화면** (단계별 현황, 최근 업무일지, 이슈사항)
3. 프로젝트별 진행률 (Phase 3으로 이동)
4. ✅ **전체 간트 차트** (2026-02-06)
5. ✅ **개별 일정표 (계획/실적)** - 테이블 뷰 + 간트차트 뷰
6. ✅ **즐겨찾기 기능 (중요 프로젝트 모니터링)** (2026-02-06)

### Phase 3: 고급 기능
1. 파일 첨부 (Google Drive 연동)
2. 고급 검색/필터
3. 이메일 알림
4. 투자비/원가 리포트

---

## 7. ❓ Open Questions (확인 필요)

- [x] 구글 시트의 정확한 구조 (컬럼명, 시트 구성) ✅ 확인 완료
- [x] 모바일 지원 필요 여부 → **반응형 웹으로 지원**
- [x] 동시 사용자 수 예상 → **5~20명**
- [x] 추가 요청 기능 확인 → **파일 첨부, 이메일 알림, 고급 ��색**
- [x] 기술 스택 → **Next.js + Google Sheets API**
- [x] 배포 환경 → **회사 내부 서버 (On-premise)**
- [x] 로그인 방식 → **자체 로그인 (ID/Password) + Service Account**
- [x] 업무일지 연동 → **프로젝트에 자동 반영**
- [ ] 담당자 시트의 정확한 컬럼 구조
- [ ] 항목정보 시트의 정확한 컬럼 구조

---

## 8. 📊 Summary (요약)

| 항목 | 내용 |
|------|------|
| 프로젝트명 | 연구개발 프로젝트 관리 시스템 |
| 목표 | 구글 시트 기반 통합 프로젝트 관리 웹 |
| 사용자 | 연구개발 담당자 (5~20명) |
| 기술 스택 | Next.js + TypeScript + Google APIs |
| 배포 | 회사 내부 서버 |
| 핵심 기능 | 프로젝트 관리, 업무일지, 간트차트, 대시보드 |
| 데이터 | 구글 시트 (원본), 양방향 동기화 |

